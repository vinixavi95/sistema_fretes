ğŸ“¦ Sistema de Fretes â€” Backend (FastAPI)Este projeto implementa um servidor backend completo para um sistema de fretes, utilizando FastAPI para construir uma API robusta e de alta performance.ğŸ“œ VisÃ£o GeralO sistema permite que diferentes perfis de usuÃ¡rio realizem as seguintes aÃ§Ãµes:AutenticaÃ§Ã£o (Login e Cadastro)SolicitaÃ§Ã£o e Pagamento de fretes.Consulta de histÃ³ricos.Acesso a relatÃ³rios e funcionalidades especÃ­ficas por cargo (gerente, entregador ou usuÃ¡rio comum).ğŸ› ï¸ Tecnologias UtilizadasO backend Ã© construÃ­do com as seguintes ferramentas e dependÃªncias:Linguagem: Python 3.13Framework: FastAPIServidor ASGI: UvicornBanco de Dados: PostgreSQL (com psycopg2 como driver)SeguranÃ§a: python-jose (para autenticaÃ§Ã£o JWT)APIs Externas:BrasilAPI: Consulta de CEP e coordenadas geogrÃ¡ficas.Project OSRM: CÃ¡lculo de distÃ¢ncia geogrÃ¡fica entre pontos.ğŸ—„ï¸ Arquitetura da APIO projeto segue o padrÃ£o de SeparaÃ§Ã£o de Responsabilidades, utilizando a seguinte organizaÃ§Ã£o em camadas:route: Recebe as requisiÃ§Ãµes HTTP e as encaminha.controller: Realiza validaÃ§Ãµes iniciais e orquestra as chamadas para as camadas de serviÃ§o.service: ContÃ©m a Regra de NegÃ³cio central da aplicaÃ§Ã£o.repository: Gerencia o Acesso ao Banco de Dados (CRUD).$$\text{RequisiÃ§Ã£o HTTP} \rightarrow \text{Route} \rightarrow \text{Controller} \rightarrow \text{Service} \rightarrow \text{Repository} \rightarrow \text{Database}$$ğŸš€ Funcionalidades por PerfilğŸ‘¤ UsuÃ¡rio ComumCadastro e Login (gera token JWT).AtualizaÃ§Ã£o de dados cadastrais.SolicitaÃ§Ã£o e Pagamento de frete.HistÃ³rico de fretes solicitados.ğŸ§‘â€ğŸ’¼ FuncionÃ¡rio (Entregador/Gerente)Cadastro como funcionÃ¡rio (requer uma conta de usuÃ¡rio comum prÃ©via).Registro de Ponto (entrada/saÃ­da).Entregadores: Consulta de fretes a serem entregues.Gerentes: Acesso a RelatÃ³rios de fretes.#â–¶ï¸ Como Executar o Projeto1. Clonagem do RepositÃ³rioBashgit clone https://github.com/seu-usuario/seu-repo.git
cd seu-repo
2. Rodar o Projeto (Recomendado: Docker)Utilize Docker Compose para configurar o ambiente com a aplicaÃ§Ã£o e o PostgreSQL automaticamente:Bashdocker compose up --build
3. Alternativa: ExecuÃ§Ã£o Local (Sem Docker)InstalaÃ§Ã£o de DependÃªnciasBash# Criar e ativar ambiente virtual
python -m venv venv
# Linux/macOS
source venv/bin/activate
# Windows
venv\Scripts\activate

# Atualizar pip e instalar dependÃªncias
pip install --upgrade pip
pip install -r requirements.txt
ConfiguraÃ§Ã£o do Banco de DadosConfigure um PostgreSQL local.Execute o script fretes.sql para inicializar o esquema.Iniciando o ServidorBashuvicorn main:app --reload
ğŸŒ O servidor estarÃ¡ disponÃ­vel em: http://127.0.0.1:80004. DocumentaÃ§Ã£o AutomÃ¡tica (Swagger)A documentaÃ§Ã£o interativa da API estÃ¡ disponÃ­vel em: http://127.0.0.1:8000/docsğŸ”‘ Endpoints da APIPara endpoints que requerem autenticaÃ§Ã£o, inclua o cabeÃ§alho Authorization: Bearer <seu_token> apÃ³s o Login.ğŸ” AutenticaÃ§Ã£o e UsuÃ¡rioMÃ©todoEndpointDescriÃ§Ã£oCorpo/DetalhesPOST/usuario/cadastroCria um novo usuÃ¡rio.nome, email, senha, telefone, eh_funcionarioPOST/usuario/loginRealiza o login e gera o token JWT.email, senhaPOST/usuario/funcionarioCadastra o usuÃ¡rio logado como funcionÃ¡rio (token necessÃ¡rio).usuario_id, cargo, numero_registroPUT/usuario/atualizarAtualiza dados do usuÃ¡rio logado (token necessÃ¡rio).nome, email, senhağŸšš FretesMÃ©todoEndpointDescriÃ§Ã£oCorpo/DetalhesPOST/frete/solicitacaoSolicita um novo frete (token necessÃ¡rio).peso, opcao, cep_origem, cep_destinoPOST/frete/pagamentoRegistra o pagamento de um frete.frete_id, meio_pagamentoGET/frete/historicoConsulta o histÃ³rico de fretes (apenas gerentes).GET/frete/consultaConsulta detalhes de um frete especÃ­fico (apenas entregador).Query param: frete_idâš ï¸ ObservaÃ§Ã£o: O cÃ¡lculo do frete depende da BrasilAPI e Project OSRM. Instabilidades na devoluÃ§Ã£o de coordenadas podem impedir o cÃ¡lculo.ğŸ“Š RelatÃ³rios e PontoMÃ©todoEndpointDescriÃ§Ã£oCorpo/DetalhesGET/relatorio/fretes-diaObtÃ©m relatÃ³rios de fretes por data.Query param: data_consulta (opcional)POST/relatorio/pontoRegistra a entrada ou saÃ­da do funcionÃ¡rio (token necessÃ¡rio).tipo ("entrada" ou "saida")
